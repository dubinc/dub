enum WorkflowTrigger {
  partnerEnrolled // scheduled
  partnerMetricsUpdated

  // TODO: Remove this after migrations
  clickRecorded
  commissionEarned
  leadRecorded
  saleRecorded
}

model Workflow {
  id                String          @id @default(cuid())
  programId         String
  name              String?
  trigger           WorkflowTrigger
  triggerConditions Json
  actions           Json
  disabledAt        DateTime?
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @updatedAt

  program      Program       @relation(fields: [programId], references: [id], onDelete: Cascade)
  bounty       Bounty?
  campaign     Campaign?
  partnerGroup PartnerGroup?

  @@index([programId, trigger])
}
