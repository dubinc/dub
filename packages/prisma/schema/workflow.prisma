enum WorkflowTrigger {
  leadRecorded
  saleRecorded
  commissionEarned
  partnerJoinedDuration
}

enum WorkflowTriggerType {
  event
  scheduled
}

model Workflow {
  id                String              @id @default(cuid())
  programId         String
  name              String?
  trigger           WorkflowTrigger
  triggerType       WorkflowTriggerType @default(event)
  triggerConditions Json
  actions           Json
  disabledAt        DateTime?
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt

  program Program       @relation(fields: [programId], references: [id], onDelete: Cascade)
  bounty  Bounty?
  email   ProgramEmail?

  @@index([programId, trigger])
}
