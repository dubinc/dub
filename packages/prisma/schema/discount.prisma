model Discount {
  id String @id @default(cuid())

  amount      Int            @default(0)
  type        CommissionType @default(percentage)
  maxDuration Int? // in months (0 -> not recurring, null -> lifetime)

  couponId     String?
  couponTestId String?

  programId String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  programEnrollments ProgramEnrollment[]
  defaultForProgram  Program?            @relation("ProgramDefaultDiscount")
  program            Program             @relation("ProgramDiscounts", fields: [programId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  // Remove these fields after running the migration
  duration Int?
  interval CommissionInterval?

  @@index(programId)
}
